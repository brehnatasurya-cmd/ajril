<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ular Tangga Quiz Matematika Aljabar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #4CAF50;
        }
        #board {
            display: grid;
            grid-template-columns: repeat(10, 50px);
            grid-template-rows: repeat(10, 50px);
            gap: 2px;
            margin: 20px auto;
            width: 520px;
            height: 520px;
        }
        .cell {
            background-color: #fff;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            position: relative;
        }
        .snake {
            background-color: #ff6b6b;
        }
        .ladder {
            background-color: #51cf66;
        }
        .player {
            background-color: #74b9ff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            position: absolute;
            top: 5px;
            left: 5px;
        }
        .bot {
            background-color: #fdcb6e;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            position: absolute;
            top: 5px;
            right: 5px;
        }
        #controls {
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #question {
            margin: 20px;
            padding: 20px;
            background-color: #fff;
            border: 1px solid #ccc;
            display: none;
        }
        #score {
            margin: 20px;
        }
        #winner {
            font-size: 24px;
            color: #ff5722;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Ular Tangga Quiz Matematika Aljabar</h1>
    <div id="board"></div>
    <div id="controls">
        <button id="rollDice">Lempar Dadu</button>
        <p>Giliran: <span id="turn">Player</span></p>
    </div>
    <div id="score">
        <p>Skor Player: <span id="playerScore">0</span> | Posisi: <span id="playerPos">1</span></p>
        <p>Skor BOT: <span id="botScore">0</span> | Posisi: <span id="botPos">1</span></p>
    </div>
    <div id="question">
        <p id="questionText"></p>
        <input type="text" id="answer" placeholder="Jawaban Anda">
        <button id="submitAnswer">Jawab</button>
        <p id="feedback"></p>
    </div>
    <div id="winner"></div>

    <script>
        const board = document.getElementById('board');
        const rollDiceBtn = document.getElementById('rollDice');
        const turnSpan = document.getElementById('turn');
        const playerScoreSpan = document.getElementById('playerScore');
        const botScoreSpan = document.getElementById('botScore');
        const playerPosSpan = document.getElementById('playerPos');
        const botPosSpan = document.getElementById('botPos');
        const questionDiv = document.getElementById('question');
        const questionText = document.getElementById('questionText');
        const answerInput = document.getElementById('answer');
        const submitAnswerBtn = document.getElementById('submitAnswer');
        const feedback = document.getElementById('feedback');
        const winnerDiv = document.getElementById('winner');

        let playerPos = 1;
        let botPos = 1;
        let playerScore = 0;
        let botScore = 0;
        let currentTurn = 'player';
        let currentQuestion = null;
        let posToIndex = {};

        // Soal aljabar (contoh sederhana)
        const questions = {
            easy: [
                { q: "Sederhanakan: 2x + 3x", a: "5x" },
                { q: "Sederhanakan: 4a - 2a", a: "2a" },
                { q: "Sederhanakan: 3b + 2b - b", a: "4b" }
            ],
            medium: [
                { q: "Selesaikan: 2x + 3 = 7", a: "2" },
                { q: "Selesaikan: 3y - 5 = 10", a: "5" },
                { q: "Selesaikan: 4z + 2 = 18", a: "4" }
            ],
            hard: [
                { q: "Selesaikan: (x+2)(x-3) = 0", a: "-2,3" },
                { q: "Selesaikan: x^2 - 5x + 6 = 0", a: "2,3" },
                { q: "Manipulasi: 2(x+1) = 4", a: "1" }
            ]
        };

        // Ular dan tangga (contoh sederhana)
        const snakes = { 16: 6, 47: 26, 49: 11, 56: 53, 62: 19, 64: 60, 87: 24, 93: 73, 95: 75, 98: 78 };
        const ladders = { 1: 38, 4: 14, 9: 31, 21: 42, 28: 84, 36: 44, 51: 67, 71: 91, 80: 100 };

        // Buat posisi papan dalam urutan visual (zigzag)
        let positions = [];
        for (let row = 0; row < 10; row++) {
            if (row % 2 === 0) { // Baris genap: dari kanan ke kiri
                for (let col = 9; col >= 0; col--) {
                    let num = (9 - row) * 10 + (9 - col) + 1;
                    positions.push(num);
                }
            } else { // Baris ganjil: dari kiri ke kanan
                for (let col = 0; col < 10; col++) {
                    let num = (9 - row) * 10 + col + 1;
                    positions.push(num);
                }
            }
        }

        // Buat papan
        positions.forEach((num, idx) => {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.textContent = num;
            if (snakes[num]) cell.classList.add('snake');
            if (ladders[num]) cell.classList.add('ladder');
            board.appendChild(cell);
            posToIndex[num] = idx;
        });

        // Update posisi bidak
        function updateBoard() {
            document.querySelectorAll('.player').forEach(p => p.remove());
            document.querySelectorAll('.bot').forEach(b => b.remove());
            const playerCell = board.children[posToIndex[playerPos]];
            const botCell = board.children[posToIndex[botPos]];
            const playerDiv = document.createElement('div');
            playerDiv.classList.add('player');
            playerCell.appendChild(playerDiv);
            const botDiv = document.createElement('div');
            botDiv.classList.add('bot');
            botCell.appendChild(botDiv);
        }

        // Lempar dadu
        rollDiceBtn.addEventListener('click', () => {
            const dice = Math.floor(Math.random() * 6) + 1;
            alert(`Dadu: ${dice}`);
            if (currentTurn === 'player') {
                playerPos += dice;
                if (playerPos > 100) playerPos = 100;
                if (snakes[playerPos]) playerPos = snakes[playerPos];
                if (ladders[playerPos]) playerPos = ladders[playerPos];
                playerPosSpan.textContent = playerPos;
                if (playerPos % 5 === 0) showQuestion('player');
                else currentTurn = 'bot';
            } else {
                botPos += dice;
                if (botPos > 100) botPos = 100;
                if (snakes[botPos]) botPos = snakes[botPos];
                if (ladders[botPos]) botPos = ladders[botPos];
                botPosSpan.textContent = botPos;
                if (botPos % 5 === 0) botAnswer();
                else currentTurn = 'player';
            }
            updateBoard();
            checkWinner();
            turnSpan.textContent = currentTurn === 'player' ? 'Player' : 'BOT';
        });

        // Tampilkan soal
        function showQuestion(turn) {
            currentTurn = turn;
            let level = 'easy';
            if (turn === 'player' ? playerPos > 60 : botPos > 60) level = 'hard';
            else if (turn === 'player' ? playerPos > 30 : botPos > 30) level = 'medium';
            const q = questions[level][Math.floor(Math.random() * questions[level].length)];
            currentQuestion = q;
            questionText.textContent = q.q;
            questionDiv.style.display = 'block';
            answerInput.value = '';
            feedback.textContent = '';
        }

        // Jawab soal
        submitAnswerBtn.addEventListener('click', () => {
            const answer = answerInput.value.trim();
            if (answer === currentQuestion.a) {
                feedback.textContent = 'Benar! +5 poin.';
                if (currentTurn === 'player') playerScore += 5;
                else botScore += 5;
            } else {
                feedback.textContent = 'Salah! Mundur 3 kotak.';
                if (currentTurn === 'player') {
                    playerPos = Math.max(1, playerPos - 3);
                    playerPosSpan.textContent = playerPos;
                } else {
                    botPos = Math.max(1, botPos - 3);
                    botPosSpan.textContent = botPos;
                }
            }
            playerScoreSpan.textContent = playerScore;
            botScoreSpan.textContent = botScore;
            updateBoard();
            questionDiv.style.display = 'none';
            currentTurn = currentTurn === 'player' ? 'bot' : 'player';
            turnSpan.textContent = currentTurn === 'player' ? 'Player' : 'BOT';
            checkWinner();
        });

        // BOT jawab otomatis
        function botAnswer() {
            let level = 'easy';
            if (botPos > 60) level = 'hard';
            else if (botPos > 30) level = 'medium';
            const prob = level === 'easy' ? 0.8 : level === 'medium' ? 0.6 : 0.4;
            const correct = Math.random() < prob;
            if (correct) {
                botScore += 5;
                feedback.textContent = 'BOT jawab benar! +5 poin.';
            } else {
                botPos = Math.max(1, botPos - 3);
                feedback.textContent = 'BOT jawab salah! Mundur 3 kotak.';
            }
            botScoreSpan.textContent = botScore;
            botPosSpan.textContent = botPos;
            updateBoard();
            currentTurn = 'player';
            turnSpan.textContent = 'Player';
            checkWinner();
        }

        // Cek pemenang
        function checkWinner() {
            if (playerPos >= 100) {
                winnerDiv.textContent = 'Player Menang!';
                winnerDiv.style.display = 'block';
                rollDiceBtn.disabled = true;
            } else if (botPos >= 100) {
                winnerDiv.textContent = 'BOT Menang!';
                winnerDiv.style.display = 'block';
                rollDiceBtn.disabled = true;
            }
        }

        updateBoard();
    </script>
</body>
</html>
